# Тестовое задание №2 на позицию Data Scientist (Open Code)

Данный проект посвящен разработке алгоритма автоматического выделения резьбового участка на 3D-модели.

Jupyter-ноутбук с пошаговым описанием алгоритма, а также файлы `.py` с их реализацией находятся в директории `src`. Файл `.stl` с входными данными в можно найти в директории `stl`. 

## Теория

На вход алгоритму подается файл `.stl`, который преобразуется в полигональную сетку $M$ с помощью библиотеки `numpy-stl`. Далее будем работать с сеткой $M$. Ожидается также, что ось вращения ниппеля совпадает с осью $Oy$. Это вполне разумное требование. Однако если алгоритм ничего не знает об ориентации модели, то потребуется реализовать функцию, позволяющую определять ось вращения, а затем повернуть модель соответствующим образом. Последнее осуществляется функциями библиотеки `numpy-stl`. Вычисление оси вращения представлется отдельной содержательной задачей.

Важной особенностью входных данных является строение резьбы: у нее нет наклона (*нельзя закрутить гайку (?), здесь я могу быть не очень точен в терминах*). Данный алгоритм основан на этом свойстве. Для обычной резьбы он не подходит.

### Описание алгоритма

1. Для кажого полигона $p_i$ сетки $M$ задан вектор нормали $\vec{n}_i$ (голубые на рисунке ниже). Первым шагом алгоритм вычисляет углы $\alpha_j$ между векторами $\vec{n}_i$ и вектором $(0,1,0)$, сонаправленным с осью вращения.

<p align="left">
  <img src="https://github.com/inzrv/open-code-test-2/blob/main/pics/pic_1.png" width="400" title="naive algorithm">
</p>

2. Далее все полигоны с одинаковыми углами $\alpha_j$ объединяются в наборы $P_{\alpha_j}$. Это делается из предположения о том, что полигоны на витке резьбы окажутся в одном множестве $P_{\alpha_j}$.
